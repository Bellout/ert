#!/bin/bash


if [ -z "$1" ]
then
    echo
    echo "A configuration file must be specified, or if you want to create a new"
    echo "configuration: enter the path to the new (non-existing) configuration file."
    echo "  ertgui.sh ert_configuration_file"
    echo
    echo "Options (for debugging):"
    echo "        gert debug ert_configuration_file"
    echo "        gert strace ert_configuration_file"
    echo
    exit
fi

#
# setup the SDP environment
#
export QT_EXPERIMENTAL=1
export PYTHON_EXPERIMENTAL=1
source /prog/sdpsoft/environment.sh > /dev/null



ORIGINAL_DIRECTORY=$PWD

export ert_gui_dir=$SDP_BINDIST/lib/python/gert
echo "Loading python GUI code from.......:" $ert_gui_dir
echo "-----------------------------------------------------------------"


if [ "$1" = "debug" ]
then
    export CONFIG_FILE="$2"
    gdb python --command=$ert_gud_dir/bin/gdbcommands
elif [ "$1" = "strace" ]
then
    strace -e trace=file python $ert_gui_dir/code/main.py "$2"
else
    python $ert_gui_dir/code/main.py "$1"
fi

cd "$ORIGINAL_DIRECTORY"